{% extends 'layout.html' %}
{% block title %}live chart{% endblock %} 
 {% block body %}
  <!-- Content Wrapper. Contains page content -->
  <div class="content-wrapper">

    <!-- Main content -->
    <div class="content pt-5 pl-2 pr-2 mt-2">
      <div class="container-fluid">
<mobile-nav>

  <div class="mobile-header">
    <div class="image mr-3 d-flex">
      <img src="./images/favicon.png" class="img-circle to-middle" alt="">
    </div>
    <div class="identity">
      <p>Token</p>
      <h5 class="m-0 text-white">$0.0325752
        <span>15.18%</span>
      </h5>
    </div>

    <div class="btn-dropdown-mobile-toggle dropleft to-middle">
      <button type="button" class="btn btn-default">
        <i class="fas fa-ellipsis-v"></i>
      </button>
      <div class="mobile-dropdown-menu">
        <a class="dropdown-item" href="#">Action</a>
        <a class="dropdown-item" href="#">Another action</a>
        <a class="dropdown-item" href="#">Something else here</a>
        <div class="dropdown-divider"></div>
        <a class="dropdown-item" href="#">Separated link</a>
      </div>
    </div>
  </div>

</mobile-nav>

        <!-- new row -->
       <div class="row" id="candlechartRow">
          <!-- /.col-md-8 -->
        <div class="col-lg-12">
          <div class="card">

            <div class="card-header ui-sortable-handle" style="cursor: move;" id="candlechartHeader">
              <!-- header -->
              <div class="i-flex">
                <div class="summary-panel d-flex">
                  <div class="image mr-3">
                    <img src="https://assets.trustwalletapp.com/blockchains/smartchain/assets/{{capaddress}}/logo.png" class="img-circle elevation-2" alt="">
                  </div>
                  <div class="identity">
                    <p>Token</p>
                    <h4 class="m-0 text-white">{{name}}</h4>
                  </div>
                </div>
  
                <div class="summary-panel d-flex">
                  
                  <div class="identity ml-5">
                    <p>Price</p>
                    <h4 class="m-0 bt-green" id="price"></h4>
                  </div>
                </div>
  
                <div class="summary-panel d-flex">
                  
                  <div class="identity ml-5">
                    <p>24h Change</p>
                    <h4 class="m-0 bt-danger" id="24h"></h4>
                  </div>
                </div>
              </div>
              <!-- header -->
              <div class="card-tools mt-3 d-xs-none d-sm-none d-md-block d-lg-block">
                <!-- btn 4 -->
                <button type="button" class="btn bg-secondary" onclick="BSCscan('{{address}}')">BSCscan</button>
                <!-- btn 4 -->
                <!-- btn 3 -->
                <button type="button" class="btn bg-gradient-info">Swap</button>
                <!-- btn 3 -->
                <!-- btn 2 -->
                <button type="button" class="btn bg-gradient-danger">Trade</button>
                <!-- btn 2 -->
                <!-- btn 1 -->
                <div class="btn-group">
                  <button type="button" class="btn btn-default">PcsV2</button>
                  <button type="button" class="btn btn-default dropdown-toggle dropdown-icon" data-toggle="dropdown" aria-expanded="false">
                    <span class="sr-only">Options</span>
                    <div class="dropdown-menu" role="menu" >
                      <a class="dropdown-item" href="#">opt 1</a>
                      <a class="dropdown-item" href="#">opt 2</a>
                      <a class="dropdown-item" href="#">other here</a>
                      <div class="dropdown-divider"></div>
                      <a class="dropdown-item" href="#">another action</a>
                    </div>
                  </button>
                </div>
                <!-- btn 1 -->
              </div>

              <div class="row mt-3">
                <div class="summary-panel d-flex market_overview">
                    <span>
                      <p>Volume </p>
                      <p class="m-0 text-white"><strong id="volume"></strong></p>
                    </span>
                    <span>
                      <p>Liquidity </p>
                      <p class="m-0 text-white"><strong id="liquidity"></strong></p>
                    </span>
                    <span>
                      <p>MCap </p>
                      <p class="m-0 text-white"><strong id="market-cap"></strong></p>
                    </span>
                </div>
  
               
              </div>
            </div>
              <!-- chart area -->
            <div class="card-body">
             <!-- body inner start -->
             
            <div class="tradingview-widget-container mb-3">
              <input value="{{address}}" id="address" hidden/>
              <div id="tv_chart_container">
                <iframe src="rot/index?address={{capaddress}}&name={{info.name}}&sname={{info.symbol}}" width="100%" height="400" style="border:none;"></iframe>
              </div>
            </div>
            <!-- <div id="depthchart" class="depthchart h-40 hulk-dark-segment"></div> -->
            <!-- chart area end -->
            <!-- body inner end -->
          </div>

          </div>
        </div>
        <!-- /.col-md-8 -->

       
       </div>
       <!-- end row -->

       
       <!-- new row -->
        <div class="row" id="tableRow">
          <div class="col-lg-12">
            <div class="card">
              <table class="table table-striped table-hover table-dark" id="transaction_tab">
                <thead>
                  <tr class="success">
                    <td>Time</td>
                    <td>Traded</td>
                    <td>Token Price</td>
                    <td>Value</td>
                    <td>DEX</td>
                  </tr>
                </thead>
                <tbody>
                  <!-- <tr class="danger">
                    <td><i class="fas fa-sort-down"></i> 1m ago</td>
                    <td>285.207 <span>BOG</span></td>
                    <td>0.893 <span>USD</span></td>
                    <td>$256.018 <span>USD</span></td>
                    <td>PcSv2</td>
                  </tr> -->
                  <!-- <tr class="success">
                    <td><i class="fas fa-sort-up"></i> 1m ago</td>
                    <td>285.207 <span>BOG</span></td>
                    <td>0.893 <span>USD</span></td>
                    <td>$256.018 <span>USD</span></td>
                    <td>PcSv2</td>
                  </tr> -->
                </tbody>
              </table>
            </div>
          </div>
        </div>
        <!-- end row -->


        <div class="row" id="tokenRow">
          <div class="col-lg-12">
            <div class="card">
              <div class="card-header c-line">
                <ul class="nav nav-pills" id="tokenInfo" role="tablist">
                  <li class="nav-item">
                    <a class="nav-link active" id="info-tab" data-toggle="tab" href="#token-info" role="tab" aria-controls="token-info" aria-selected="true">token-info</a>
                  </li>
                  <li class="nav-item">
                    <a class="nav-link" id="liquify-tab" data-toggle="tab" href="#liquify" role="tab" aria-controls="liquify" aria-selected="false">liquify</a>
                  </li>
                </ul>
              </div>
              <div class="card-body">
                <div class="tab-content" id="tokenInfoContent">
                  <div class="tab-pane fade show active" id="token-info" role="tabpanel" aria-labelledby="info-tab">
                    <div class="info-header">
                      <h4>Token Info</h4>
                    </div>
                    <div class="col-12 token-info-body">
                      <p>The new BOG token, powering BogTools and <strong>Finance</strong>.</p>
                      <p>The new BOG token, powering <strong>hulk</strong> and Bogged.Finance.</p>
                      <p>The new BOG token, powering BogTools and Bogged.Finance.</p>
                    </div>
                    <div class="col-12 token-info-links">
                      <div class="info-link">
                        <a href="#">
                          <i class="fab fa-instagram"></i>
                          <p>Instagram</p>
                        </a>
                      </div>
                      <div class="info-link">
                        <a href="#">
                          <i class="fab fa-facebook"></i>
                          <p>Facebook</p>
                        </a>
                      </div>
                    </div>

                  </div>
                  <div class="tab-pane fade" id="liquify" role="tabpanel" aria-labelledby="liquify-tab">
                    <!-- info block -->
                    <div class="info-header">
                      <h5>BNB LP PancakeSwap V1</h5>
                    </div>
                    <div class="col-12 token-info-body">
                      <p><span class="success">One LP is worth $36.737</span></p>
                      <p>20.347 BOG + 0.055 BNB</p>
                      <h5 class="mt-4">Liquidity Pool Totals</h5>
                      <p>Pool adds $376.660 to total liquidity</p>
                      <p>BOG pooled: 208.614</p>
                      <p>BNB pooled: 0.563</p>
                      <p>Total LP Tokens: 10.253</p>
                      <!-- line -->
                      <div class="c-line mt-5 mb-5"></div>
                      <!-- line -->
                    </div>
                    <!-- info block end -->
                    <!-- info block -->
                    <div class="info-header">
                      <h5>BNB LP PancakeSwap V2</h5>
                    </div>
                    <div class="col-12 token-info-body">
                      <p><span class="success">One LP is worth $36.737</span></p>
                      <p>20.347 BOG + 0.055 BNB</p>
                      <h5 class="mt-4">Liquidity Pool Totals</h5>
                      <p>Pool adds $376.660 to total liquidity</p>
                      <p>BOG pooled: 208.614</p>
                      <p>BNB pooled: 0.563</p>
                      <p>Total LP Tokens: 10.253</p>
                    </div>
                    <!-- info block end -->
                    
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        


        <div class="row" id="trendRow">

        </div>
        

      </div><!-- /.container-fluid -->
    </div>
    <!-- /.content -->
  </div>
  <!-- /.content-wrapper -->

  

  <!-- Main Footer -->
  <footer class="main-footer">
    <!-- To the right -->
    <div class="float-right d-none d-sm-inline">
      Anything you want
    </div>
    <!-- Default to the left -->
    <strong>Copyright &copy; 2021 <a href="https://hulk.com">hulk</a>.</strong> All rights reserved.
  </footer>
</div>
<!-- ./wrapper -->

<footer class="mobile-action-menu">
    <ul>
      <li id="chartToggle">Chart</li>
      <li id="tradeToggle">Trades</li>
      <li id="swapToggle">Swap</li>
      <li id="trendToggle">Trending</li>
    </ul>
</footer>



<script>

  // setInterval(function(){ 
  //   get_price()
  // get_volume_and_liquidity()
  // get_market_cap()
  // get_wbnb()
  // get_transaction()

  // const today = new Date()
  // const yesterday = new Date(today)
  // yesterday.setDate(yesterday.getDate() - 1)
  
  // get_new_token_price(today.toISOString(),"0x2170ed0880ac9a755fd29b2688956bd959f933f8").then((e)=>{
  //   get_new_token_price(yesterday.toISOString(),"0x2170ed0880ac9a755fd29b2688956bd959f933f8").then((f)=>{
  //     // console.log((e-f)/e*100, e,f, '24H CHANGE')
  //     let x = (e-f)/e*100;
  //     let round_val = x.toFixed(3)
  //     document.getElementById('24h').innerHTML = '$'+round_val+'%'
  //   })
  // })
  
  // console.log('INTERVALLLLLLLLLLLLL')
  // }, 10000);

function get_price() {
    var myHeaders = new Headers();
    myHeaders.append("X-API-KEY", "BQY5beSeoIOk4UtS3QOomyrJGgjaYGJY");
    myHeaders.append("Content-Type", "application/json");

    var graphql = JSON.stringify({
      query: "{\r\n            ethereum(network: bsc) {\r\n              dexTrades(\r\n                options: {desc: [\"block.height\",\"tradeIndex\"], limit: 1}\r\n                exchangeName: {in: [\"Pancake\", \"Pancake v2\"]}\r\n                baseCurrency: {is: \"{{capaddress}}\" }\r\n                quoteCurrency: {is: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\"}\r\n\r\n              ) {\r\n                transaction {\r\n                  hash\r\n                }\r\n                tradeIndex\r\n                smartContract {\r\n                  address {\r\n                    address\r\n                  }\r\n                  contractType\r\n                  currency {\r\n                    name\r\n                  }\r\n                }\r\n                tradeIndex\r\n                block {\r\n                  height\r\n                }\r\n                baseCurrency {\r\n                  symbol\r\n                  address\r\n                }\r\n                quoteCurrency {\r\n                  symbol\r\n                  address\r\n                }\r\n                quotePrice\r\n             \r\n              }\r\n            }\r\n          }",
      variables: {}
    })
    var requestOptions = {
      method: 'POST',
      headers: myHeaders,
      body: graphql,
      redirect: 'follow'
    };

    fetch("https://graphql.bitquery.io", requestOptions)
      .then(response => response.json())
      .then(async result => {
        let _multiplyer = await get_wbnb()
        let price_value = result.data.ethereum.dexTrades[0].quotePrice * _multiplyer.wbnb.usd;
        document.getElementById("price").innerHTML = '$'+sigfig(parseFloat(price_value),1);
      })
      .catch(error => console.log('error', error));
  }

  function get_volume_and_liquidity() {
    var myHeaders = new Headers();
    myHeaders.append("Content-Type", "application/json");

    var graphql = JSON.stringify({
      query: "query tokenDayDatas($startTime: Int!, $skip: Int!, $address: Bytes!) {\r\n                                    tokenDayDatas(first: 1000, skip: $skip, where: {token: $address, date: $startTime}, orderBy: date, orderDirection: asc) {\r\n                                      date\r\n                                      dailyVolumeUSD\r\n                                      totalLiquidityUSD\r\n                                      __typename\r\n                                    }\r\n                                  }",
      variables: {"address":"{{address}}","startTime":(new Date(new Date().toISOString().slice(0, 10)).getTime() / 1000),"skip":0}
    })
    var requestOptions = {
      method: 'POST',
      headers: myHeaders,
      body: graphql,
      redirect: 'follow'
    };

    fetch("https://bsc.streamingfast.io/subgraphs/name/pancakeswap/exchange-v2", requestOptions)
      .then(response => response.json())
      .then(async result => {
        let _multiplyer = await get_wbnb()
        let vol_value = result.data.tokenDayDatas[0].dailyVolumeUSD * _multiplyer.wbnb.usd;
        let liq_value = result.data.tokenDayDatas[0].totalLiquidityUSD * _multiplyer.wbnb.usd;

        document.getElementById("volume").innerHTML = '$'+sigfig(parseFloat(vol_value),1);
        document.getElementById("liquidity").innerHTML = '$'+sigfig(parseFloat(liq_value),1);
      })
      .catch(error => console.log('error', error));
  }

  function get_market_cap() {
    var requestOptions = {
        method: 'GET',
        redirect: 'follow'
       };
      fetch("https://api.bscscan.com/api?module=stats&action=tokenCsupply&contractaddress={{capaddress}}&apikey=DK835MZSQIEABA8R9BBQHHNXG7A2R991T3", requestOptions)
      .then(response => response.json())
      .then(async result => {
        let _multiplyer = await get_wbnb()
        let value = result.result * _multiplyer.wbnb.usd;
        document.getElementById("market-cap").innerHTML = '$'+sigfig(parseFloat(value),1);
      }) 
      .catch(error => console.log('error', error));
  }

  function get_wbnb() {
    return new Promise((resolve,reject)=>{
      var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");

      var requestOptions = {
          method: 'GET',
          headers: myHeaders,
          redirect: 'follow'
      };
        
      fetch("https://api.coingecko.com/api/v3/simple/price?ids=wbnb&vs_currencies=usd&include_market_cap=false&include_24hr_vol=false&include_24hr_change=false&include_last_updated_at=false", requestOptions)
      .then(response => response.json())
      .then(result => {
        resolve(result)
      })
      .catch(error => reject(error));
    })

  }
    
  function onTimetokenprice(address,date){
    return new Promise((resolve, reject)=>{
      var myHeaders = new Headers();
      myHeaders.append("X-API-Key", "BQY5beSeoIOk4UtS3QOomyrJGgjaYGJY");
      myHeaders.append("Content-Type", "application/json");

      var graphql = JSON.stringify({
        query: `\n{\n          ethereum(network: bsc) {\n            dexTrades(\n              options: {desc: [\"block.height\",\"tradeIndex\"], limit: 1}\n              exchangeName: {in: [\"Pancake\", \"Pancake v2\"]}\n              baseCurrency: {is: \"${address}\"}\n              quoteCurrency: {is: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\"}\n              date: {since: \"${date.split(" ").join("T") + ".000Z"}\", till: \"${date.split(" ").join("T") + ".000Z"}\"}\n            ) {\n              transaction {\n                hash\n              }\n              tradeIndex\n              smartContract {\n                address {\n                  address\n                }\n                contractType\n                currency {\n                  name\n                }\n              }\n              tradeIndex\n              block {\n                height\n              }\n              baseCurrency {\n                symbol\n                address\n              }\n              quoteCurrency {\n                symbol\n                address\n              }\n              quotePrice\n           \n            }\n          }\n        }\n\n`,
        variables: {}
      })
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: graphql,
        redirect: 'follow'
      };

      fetch("https://graphql.bitquery.io", requestOptions)
        .then(response => response.json())
        .then(result => resolve(result))
        .catch(error => reject(error));   
      })
  }

  function addRow(time,traded,price,value,exchange,status) {    
    var table = document.getElementById("transaction_tab");
  
    var rowCount = table.rows.length;
    var row = table.insertRow(rowCount);

    // TIME DIFFERENCE
    let expiration = time
    const now = moment(expiration);
    const exp = moment();

    // console.log(exp.format(), "FORMATTTTTTTTTTTTT");

    days = exp.diff(now, 'days');
    hours = exp.subtract(days, 'days').diff(now, 'hours');
    minutes = exp.subtract(hours, 'hours').diff(now, 'minutes');

    // console.log(hours, minutes, "TIMEEEEEEEEE")
    // TIME DIFFERENCE ENDDDD

    if(status == "BUY"){
      row.className ="danger"
      row.insertCell(0).innerHTML= `<i class="fas fa-sort-down"></i> ${hours} hr ${minutes} min ago`;
    }
    else{
      row.className ="success"
      row.insertCell(0).innerHTML=`<i class="fas fa-sort-up"></i> ${hours} hr ${minutes} min ago`;
    }
    row.insertCell(1).innerHTML= `${traded} <span>{{info.symbol}}</span>`;
    row.insertCell(2).innerHTML= `${price} <span>USD</span>`;
    row.insertCell(3).innerHTML= `${value} <span>BOG</span>`;
    row.insertCell(4).innerHTML= `${exchange}`;
  }

  function get_transaction() {
    var myHeaders = new Headers();
      myHeaders.append("Content-Type", "application/json");
      
      var graphql = JSON.stringify({
        query: "{\r\n          ethereum(network: bsc) {\r\n            dexTrades(\r\n              options: {desc: [\"block.height\", \"tradeIndex\"], limit: 10, offset: 0}\r\n          \r\n              baseCurrency: {is: \"{{address}}\"}\r\n            ) {\r\n              block {\r\n                timestamp {\r\n                  time(format: \"%Y-%m-%d %H:%M:%S\")\r\n                }\r\n                height\r\n              }\r\n              tradeIndex\r\n              exchange {\r\n                fullName\r\n              }\r\n              smartContract {\r\n                address {\r\n                  address\r\n                  annotation\r\n                }\r\n              }\r\n              side\r\n              baseAmount\r\n              baseCurrency {\r\n                address\r\n                symbol\r\n              }\r\n              quoteAmount\r\n              quoteCurrency {\r\n                address\r\n                symbol\r\n              }\r\n              transaction {\r\n                hash\r\n              }\r\n            }\r\n          }\r\n        }",
        variables: {}
      })
      var requestOptions = {
        method: 'POST',
        headers: myHeaders,
        body: graphql,
        redirect: 'follow'
      };
      
    
      fetch("https://graphql.bitquery.io?X-API-Key=BQY5beSeoIOk4UtS3QOomyrJGgjaYGJY", requestOptions)
        .then(response => response.json())
        
        .then(result => {
        let arr = []
         result.data.ethereum.dexTrades.forEach(async (entry,i) => {
         let price_obj= await onTimetokenprice('{{address}}',entry.block.timestamp.time)
         //console.log(entry.block.timestamp.time,"Time");
        let ww =await get_wbnb()
        // console.log(typeof(arr), 'TYPEEEEEEEEEE')
        let price = price_obj.data.ethereum.dexTrades[0].quotePrice * ww.wbnb.usd
        arr.push({"time": entry.block.timestamp.time, "traded": entry.baseAmount, "price": price, "value": entry.baseAmount*price, "exchange": entry.exchange.fullName, "status": entry.side})
        if(result.data.ethereum.dexTrades.length-1 == i){
          get_date_order(arr)

        }
        // addRow(entry.block.timestamp.time,entry.baseAmount,price,entry.baseAmount*price,entry.exchange.fullName,entry.side)
        //console.log(price_obj.data.ethereum.dexTrades[0].quotePrice * ww.wbnb.usd,entry ,"new usd")  
      });

      
         
    }) 
    .catch(error => console.log('error=====>', error));

  }

  function get_date_order(_data) {
    // console.log(_data, 'ARRRRRRRRRRRRRRRR')
    // console.log(_data[0].time, 'TIMEEEEEEEEEEEEEE')
    _data.sort(function (a,b) {
      x = new Date(b.time).getTime()
      y = new Date(a.time).getTime()

      return x-y
    })

    // console.log(_data, 'DATAAAAAAAAAAAAAAAAA')
    _data.forEach(element => {
      addRow(element.time,element.traded,element.price,element.traded*element.price,element.exchange,element.status)
      // addRow(time,traded,price,value,exchange,status)
    });

    // console.log(typeof(_data[0].time), _data, 'DTAAAAAAAAAAa')
  }

  async function get_new_token_price(date, address) {
    return new Promise(async (resolve, reject) => {
    var myHeaders = new Headers();
    myHeaders.append("X-API-KEY", "BQY5beSeoIOk4UtS3QOomyrJGgjaYGJY");
    myHeaders.append("Content-Type", "application/json");

    var graphql = JSON.stringify({
      query: `{\r\n          ethereum(network: bsc) {\r\n            dexTrades(\r\n              options: {desc: [\"block.height\",\"tradeIndex\"], limit: 1}\r\n              exchangeName: {in: [\"Pancake\", \"Pancake v2\"]}\r\n              baseCurrency: {is: \"{{address}}\"}\r\n              quoteCurrency: {is: \"0xbb4CdB9CBd36B01bD1cBaEBF2De08d9173bc095c\"}\r\n              date: {since: \"${date}\", till: \"${date}\"}\r\n            ) {\r\n              transaction {\r\n                hash\r\n              }\r\n              tradeIndex\r\n              smartContract {\r\n                address {\r\n                  address\r\n                }\r\n                contractType\r\n                currency {\r\n                  name\r\n                }\r\n              }\r\n              tradeIndex\r\n              block {\r\n                height\r\n              }\r\n              baseCurrency {\r\n                symbol\r\n                address\r\n              }\r\n              quoteCurrency {\r\n                symbol\r\n                address\r\n              }\r\n              quotePrice\r\n           \r\n            }\r\n          }\r\n        }`,
      variables: {}
    })
    var requestOptions = {
      method: 'POST',
      headers: myHeaders,
      body: graphql,
      redirect: 'follow'
    };

    fetch("https://graphql.bitquery.io", requestOptions)
      .then(response => response.json())
      .then(result => resolve(result.data.ethereum.dexTrades[0].quotePrice))
      .catch(error => console.log('error', error));
  })
  }

  const today = new Date()
  const yesterday = new Date(today)
  yesterday.setDate(yesterday.getDate() - 1)
  
  get_new_token_price(today.toISOString(),"0x2170ed0880ac9a755fd29b2688956bd959f933f8").then((e)=>{
    get_new_token_price(yesterday.toISOString(),"0x2170ed0880ac9a755fd29b2688956bd959f933f8").then((f)=>{
      // console.log((e-f)/e*100, e,f, '24H CHANGE')
      let x = (e-f)/e*100;
      let round_val = x.toFixed(3)
      document.getElementById('24h').innerHTML = '$'+round_val+'%'
    })
  })

  get_price()
  get_volume_and_liquidity()
  get_market_cap()
  get_wbnb()
  get_transaction()
    
  // Calculates significant figures with suffixes K/M/B/T, e.g. 1234 = 1.23K
  function sigfig(num, sigfigs_opt) {
    // Set default sigfigs to 3
    sigfigs_opt = (typeof sigfigs_opt === "undefined") ? 3 : sigfigs_opt;
    // Only assigns sig figs and suffixes for numbers > 1
    if (num <= 1) return num.toPrecision(sigfigs_opt);
    // Calculate for numbers > 1
    var power10 = log10(num);
    var power10ceiling = Math.floor(power10) + 1;
    // 0 = '', 1 = 'K', 2 = 'M', 3 = 'B', 4 = 'T'
    var SUFFIXES = ['', 'K', 'M', 'B', 'T','QD','QT','SX','SP','O','N'];
    // 100: power10 = 2, suffixNum = 0, suffix = ''
    // 1000: power10 = 3, suffixNum = 1, suffix = 'K'
    var suffixNum = Math.floor(power10 / 3);
    var suffix = SUFFIXES[suffixNum];
    // Would be 1 for '', 1000 for 'K', 1000000 for 'M', etc.
    var suffixPower10 = Math.pow(10, suffixNum * 3);
    var base = num / suffixPower10;
    var baseRound = base.toPrecision(sigfigs_opt);
    return baseRound + suffix;
  }

  function log10(num) {
    return (Math.round(Math.log(num) / Math.LN10 * 1e6) / 1e6);
  }

  function BSCscan(_address) {
    // console.log(_address, 'ADDRESSS')
    window.open("https://bscscan.com/token/"+_address, '_blank')
  }

//  alert('{{text}}')
  // $(function(){
  //   //--------------
  //   //- AREA CHART -
  //   //--------------

  //   // Get context with jQuery - using jQuery's .get() method.
  //   var areaChartCanvas = $('#areaChart').get(0).getContext('2d')
  //   var areaChartCanvas2 = $('#areaChart2').get(0).getContext('2d')
    

  //   var areaChartData2 = {
  //     labels  : ['Now', '30m', '1H', '1D', '1M', '1Y', 'All'],
  //     datasets: [
  //       {
  //         label               : 'Hulk Token',
  //         backgroundColor     : 'rgba(66, 39, 142, 0.4)',
  //         borderColor         : 'rgba(0, 221, 239, 0.8)',
  //         pointRadius          : false,
  //         pointColor          : '#3b8bba',
  //         pointStrokeColor    : 'rgba(0, 221, 239, 1)',
  //         pointHighlightFill  : '#fff',
  //         pointHighlightStroke: 'rgba(0, 221, 239, 1)',
  //         data                : [28, 48, 40, 39, 86, 77, 87]
  //       },
  //       {
  //         label               : 'MaticPoly',
  //         backgroundColor     : 'transparent',
  //         borderColor         : 'rgba(210, 214, 222, 1)',
  //         pointRadius         : false,
  //         pointColor          : 'rgba(210, 214, 222, 1)',
  //         pointStrokeColor    : '#c1c7d1',
  //         pointHighlightFill  : '#fff',
  //         pointHighlightStroke: 'rgba(220,220,220,1)',
  //         data                : [65, 59, 20, 81, 76, 55, 37]
  //       },
  //     ]
  //   }
  //   var areaChartData = {
  //     labels  : ['January', 'February', 'March', 'April', 'May', 'June', 'July'],
  //     datasets: [
  //       {
  //         label               : 'Hulk Token',
  //         backgroundColor     : 'rgba(66, 39, 142, 0.4)',
  //         borderColor         : 'rgba(0, 221, 239, 0.8)',
  //         pointRadius          : false,
  //         pointColor          : '#3b8bba',
  //         pointStrokeColor    : 'rgba(0, 221, 239, 1)',
  //         pointHighlightFill  : '#fff',
  //         pointHighlightStroke: 'rgba(0, 221, 239, 1)',
  //         data                : [28, 48, 40, 19, 86, 27, 90]
  //       },
  //       {
  //         label               : 'MaticPoly',
  //         backgroundColor     : 'transparent',
  //         borderColor         : 'rgba(210, 214, 222, 1)',
  //         pointRadius         : false,
  //         pointColor          : 'rgba(210, 214, 222, 1)',
  //         pointStrokeColor    : '#c1c7d1',
  //         pointHighlightFill  : '#fff',
  //         pointHighlightStroke: 'rgba(220,220,220,1)',
  //         data                : [65, 59, 80, 81, 56, 55, 40]
  //       },
  //     ]
  //   }

  //   var areaChartOptions = {
  //     maintainAspectRatio : false,
  //     responsive : true,
  //     legend: {
  //       display: false
  //     },
  //     scales: {
  //       xAxes: [{
  //         gridLines : {
  //           display : false,
  //         }
  //       }],
  //       yAxes: [{
  //         gridLines : {
  //           display : false,
  //         }
  //       }]
  //     }
  //   }

  //   // This will get the first returned node in the jQuery collection.
  //   var areaChart       = new Chart(areaChartCanvas, { 
  //     type: 'line',
  //     data: areaChartData, 
  //     options: areaChartOptions
  //   })
  //   var areaChart2       = new Chart(areaChartCanvas2, { 
  //     type: 'line',
  //     data: areaChartData2, 
  //     options: areaChartOptions
  //   })

  // })
</script>

{% endblock body %}